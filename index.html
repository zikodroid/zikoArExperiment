<html>
  <head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- مكتبة دعم أوربت للتحكم بالمعاينة -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-orbit-controls@1.3.0/dist/aframe-orbit-controls.min.js"></script>
    <!-- مكتبة model-viewer للAR الحقيقي على الموبايل -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      .mv-ar-container {
        width: 100vw;
        height: 100vh;
        margin: 0; padding: 0;
        background: #000;
        position: fixed; left: 0; top: 0;
        z-index: 9999;
      }
      .ar-button {
        position: absolute;
        bottom: 32px;
        left: 50%;
        transform: translateX(-50%);
        background: #1976d2;
        color: #fff;
        border: none;
        border-radius: 12px;
        padding: 18px 36px;
        font-size: 1.2em;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 4px 24px #2226;
      }
      .ar-controls {
        position: absolute;
        top: 24px; left: 50%;
        transform: translateX(-50%);
        display: flex; gap: 18px;
        z-index: 10000;
      }
      .ar-controls button {
        background: #222a;
        color: #fff;
        border: 2px solid #fff5;
        border-radius: 10px;
        padding: 12px 18px;
        font-size: 1em;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.1s;
      }
      .ar-controls button:hover { background: #1976d2; }
    </style>
  </head>
  <body style="margin:0;overflow:hidden">
    <!-- model-viewer هو أفضل حل حالي لتشغيل AR بدون ماركر + دعم تحكم اوربت+ زرار + يعمل على كل الموبايلات الحديثة -->
    <div class="mv-ar-container">
      <model-viewer id="mv" 
        src="model.glb" 
        ar 
        ar-modes="webxr scene-viewer quick-look"
        camera-controls 
        touch-action="pan-y"
        auto-rotate
        style="width:100vw; height:100vh; background:#000;"
        exposure="1"
        shadow-intensity="1"
        camera-orbit="0deg 70deg 2.2m"
      >
        <!-- أزرار تحكم بالأنيميشن -->
        <div class="ar-controls">
          <button onclick="playAnimation(0)">Animation 1</button>
          <button onclick="playAnimation(1)">Animation 2</button>
        </div>
        <!-- زر تفعيل وضع الواقع المعزز -->
        <button slot="ar-button" class="ar-button">AR starten</button>
      </model-viewer>
    </div>
    <script>
      // التحكم بتشغيل الأنيميشنات في ملف glb
      const mv = document.querySelector('#mv');
      function playAnimation(index) {
        // reset كل الأنيميشنات
        mv.pause();
        mv.currentTime = 0;
        mv.animationName = mv.availableAnimations[index]?.name;
        mv.play();
      }
      // لضمان دائماً المجسم قدام الكاميرا، استخدم camera-orbit كما في الكود
      // وللسماح للمستخدم بالدوران حول المجسم استخدم camera-controls
      // الفيديو من الكاميرا الخلفية يُشغّل تلقائياً بوضع AR (اضغط "AR starten" وشغّل الكاميرا من الموبايل)
    </script>
  </body>
</html>
