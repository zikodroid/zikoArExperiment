<html>
  <head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-orbit-controls-component@1.3.0/dist/aframe-orbit-controls-component.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <video id="bgvideo" autoplay playsinline style="display:none;"></video>
    <a-scene embedded style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;">
      <!-- الكاميرا -->
      <a-entity id="rig" position="0 1.6 3">
        <a-camera wasd-controls-enabled="false"></a-camera>
      </a-entity>
      <!-- خلفية فيديو من الكاميرا -->
      <a-plane id="bg" position="0 1.6 -2" width="4" height="3" material="shader: flat; src: #bgvideo"></a-plane>
      <!-- المجسم ثلاثي الأبعاد -->
      <a-entity id="model"
        gltf-model="#gltf"
        position="0 1.6 -1"
        scale="1 1 1"
        animation-mixer>
      </a-entity>
      <!-- أزرار الأنيميشن -->
      <a-entity id="ui" position="0 1.3 -0.7">
        <a-plane position="-0.3 0 0" width="0.25" height="0.1" color="#1976d2" class="clickable"
                 event-set__enter="_event: mouseenter; color: #1565c0"
                 event-set__leave="_event: mouseleave; color: #1976d2"
                 onclick="document.querySelector('#model').components['animation-mixer'].playAction('Animation_1')">
          <a-text value="Play 1" align="center" color="white" position="0 0 0.01" width="1"></a-text>
        </a-plane>
        <a-plane position="0.3 0 0" width="0.25" height="0.1" color="#388e3c" class="clickable"
                 event-set__enter="_event: mouseenter; color: #2e7d32"
                 event-set__leave="_event: mouseleave; color: #388e3c"
                 onclick="document.querySelector('#model').components['animation-mixer'].playAction('Animation_2')">
          <a-text value="Play 2" align="center" color="white" position="0 0 0.01" width="1"></a-text>
        </a-plane>
      </a-entity>
      <!-- تحكم أوربت -->
      <a-entity orbit-controls="target: 0 1.6 -1; enableDamping: true; dampingFactor:0.125; rotateSpeed:0.2"></a-entity>
      <a-assets>
        <a-asset-item id="gltf" src="model.glb"></a-asset-item>
      </a-assets>
    </a-scene>
    <script>
      // تشغيل كاميرا الموبايل كخلفية
      navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(stream){
        const video = document.getElementById('bgvideo');
        video.srcObject = stream;
        video.play();
      });
    </script>
  </body>
</html>
